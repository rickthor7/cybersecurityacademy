<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhishMail - Phishing Email Analyzer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #06ffa5;
            --danger-color: #ff006e;
            --warning-color: #ffbe0b;
            --dark-color: #0a0e27;
            --light-color: #f8f9fa;
            --gray-color: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--light-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(10, 14, 39, 0.7);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .logo i {
            font-size: 30px;
        }

        nav {
            display: flex;
            align-items: center;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: var(--light-color);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            white-space: nowrap;
        }

        nav a:hover {
            color: var(--primary-color);
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
            z-index: 1001;
        }

        .menu-toggle span {
            display: block;
            height: 3px;
            width: 100%;
            background-color: var(--light-color);
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        main {
            flex: 1;
            padding: 40px 5%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .hero {
            text-align: center;
            margin-bottom: 50px;
            max-width: 800px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            color: #a0a9d0;
            margin-bottom: 30px;
        }

        .analyzer-container {
            width: 100%;
            max-width: 800px;
            background: rgba(26, 31, 58, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-methods {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .method-tab {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .method-tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .method-tab.active {
            background: rgba(67, 97, 238, 0.2);
            border-color: var(--primary-color);
        }

        .method-icon {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .method-name {
            font-weight: 600;
        }

        .input-content {
            margin-bottom: 20px;
        }

        .input-panel {
            display: none;
        }

        .input-panel.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .text-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--light-color);
            font-size: 16px;
            resize: vertical;
            transition: all 0.3s;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(67, 97, 238, 0.1);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .upload-subtext {
            color: #a0a9d0;
            font-size: 14px;
        }

        .file-input {
            display: none;
        }

        .file-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }

        .file-details {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .file-icon {
            font-size: 36px;
            color: var(--primary-color);
        }

        .file-name {
            font-weight: 600;
            font-size: 18px;
            word-break: break-all;
        }

        .file-meta {
            color: #a0a9d0;
            font-size: 14px;
        }

        .btn {
            padding: 15px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        .btn:hover {
            background: var(--secondary-color);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .progress-container {
            margin-bottom: 20px;
            display: none;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0;
            background: var(--primary-color);
            border-radius: 5px;
            transition: width 0.3s;
        }

        .analysis-status {
            text-align: center;
            margin-bottom: 15px;
            display: none;
        }

        .analysis-result {
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-status {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .safe {
            color: var(--success-color);
        }

        .danger {
            color: var(--danger-color);
        }

        .warning {
            color: var(--warning-color);
        }

        .analysis-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .analysis-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 18px;
            color: var(--primary-color);
            margin: 0;
        }

        .section-icon {
            color: var(--primary-color);
        }

        .analysis-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .analysis-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .item-icon {
            width: 20px;
            text-align: center;
            margin-top: 2px;
        }

        .item-icon.safe {
            color: var(--success-color);
        }

        .item-icon.danger {
            color: var(--danger-color);
        }

        .item-icon.warning {
            color: var(--warning-color);
        }

        .item-content {
            flex: 1;
        }

        .item-label {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .item-value {
            color: #a0a9d0;
            font-size: 14px;
            word-break: break-word;
        }

        .recommendations {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .recommendations-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
        }

        .recommendation-item:last-child {
            margin-bottom: 0;
        }

        .recommendation-icon {
            color: var(--primary-color);
            margin-top: 3px;
        }

        .recommendation-text {
            flex: 1;
            line-height: 1.5;
        }

        .tips-container {
            width: 100%;
            max-width: 800px;
            background: rgba(26, 31, 58, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tips-list {
            margin-top: 20px;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tip-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .tip-icon {
            color: var(--primary-color);
            font-size: 24px;
            margin-top: 2px;
        }

        .tip-content h4 {
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .tip-content p {
            color: #a0a9d0;
            line-height: 1.5;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        footer {
            padding: 20px 5%;
            text-align: center;
            background-color: rgba(10, 14, 39, 0.7);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a0a9d0;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #a0a9d0;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .input-methods {
                flex-direction: column;
            }
            
            .analysis-sections {
                grid-template-columns: 1fr;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            nav {
                position: fixed;
                top: 0;
                right: -300px;
                width: 250px;
                height: 100vh;
                background-color: rgba(10, 14, 39, 0.98);
                backdrop-filter: blur(10px);
                flex-direction: column;
                align-items: flex-start;
                padding: 80px 20px 20px;
                border-left: 1px solid rgba(255, 255, 255, 0.1);
                transition: right 0.3s ease;
                z-index: 1000;
                box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            }
            
            nav.active {
                right: 0;
            }
            
            nav ul {
                flex-direction: column;
                width: 100%;
                gap: 20px;
            }
            
            nav li {
                width: 100%;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                padding-bottom: 15px;
            }
            
            nav li:last-child {
                border-bottom: none;
            }
            
            nav a {
                display: block;
                padding: 10px 0;
                width: 100%;
                font-size: 18px;
            }
            
            body.menu-open {
                overflow: hidden;
            }
            
            body.menu-open::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-envelope-open-text"></i>
            <span>PhishMail</span>
        </div>
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav id="navMenu">
            <ul>
                <li><a href="#home">Beranda</a></li>
                <li><a href="#analyzer">Analyzer</a></li>
                <li><a href="#tips">Tips Keamanan</a></li>
                <li><a href="#about">Tentang</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="hero">
            <h1>Phishing Email Analyzer</h1>
            <p>Analisis email untuk mendeteksi indikasi phishing. Upload atau tempel konten email untuk memeriksa keamanannya.</p>
        </section>

        <section class="analyzer-container" id="analyzer">
            <h2 class="section-title">
                <i class="fas fa-search"></i>
                Analisis Email
            </h2>
            
            <div class="input-methods">
                <div class="method-tab active" data-method="text">
                    <div class="method-icon">
                        <i class="fas fa-keyboard"></i>
                    </div>
                    <div class="method-name">Input Teks</div>
                </div>
                <div class="method-tab" data-method="file">
                    <div class="method-icon">
                        <i class="fas fa-file-upload"></i>
                    </div>
                    <div class="method-name">Upload File .eml</div>
                </div>
            </div>
            
            <div class="input-content">
                <div class="input-panel active" id="textPanel">
                    <textarea class="text-input" id="emailText" placeholder="Tempel konten email di sini..."></textarea>
                </div>
                
                <div class="input-panel" id="filePanel">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <div class="upload-text">Drag & drop file .eml di sini</div>
                        <div class="upload-subtext">atau klik untuk memilih file</div>
                        <input type="file" class="file-input" id="fileInput" accept=".eml">
                    </div>
                    
                    <div class="file-info" id="fileInfo">
                        <div class="file-details">
                            <div class="file-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div>
                                <div class="file-name" id="fileName">-</div>
                                <div class="file-meta" id="fileMeta">-</div>
                            </div>
                        </div>
                        <button class="btn btn-secondary" id="removeFileBtn">
                            <i class="fas fa-trash"></i>
                            Hapus File
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn" id="analyzeBtn">
                    <i class="fas fa-search"></i>
                    Analisis Email
                </button>
                <button class="btn btn-secondary" id="clearBtn">
                    <i class="fas fa-eraser"></i>
                    Bersihkan
                </button>
            </div>
            
            <div class="progress-container" id="progressContainer">
                <div class="progress-label">
                    <span>Kemajuan Analisis:</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="analysis-status" id="analysisStatus">
                <div class="spinner"></div>
                <p>Menganalisis email...</p>
            </div>
            
            <div class="analysis-result" id="analysisResult">
                <div class="result-header">
                    <div class="result-status" id="resultStatus">
                        <!-- Status akan ditampilkan di sini -->
                    </div>
                </div>
                
                <div class="analysis-sections">
                    <div class="analysis-section">
                        <div class="section-header">
                            <i class="fas fa-envelope section-icon"></i>
                            <h3 class="section-title">Header Email</h3>
                        </div>
                        <div id="headerAnalysis">
                            <!-- Analisis header akan ditampilkan di sini -->
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <div class="section-header">
                            <i class="fas fa-link section-icon"></i>
                            <h3 class="section-title">Tautan dalam Email</h3>
                        </div>
                        <div id="linkAnalysis">
                            <!-- Analisis tautan akan ditampilkan di sini -->
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <div class="section-header">
                            <i class="fas fa-exclamation-triangle section-icon"></i>
                            <h3 class="section-title">Konten Mencurigakan</h3>
                        </div>
                        <div id="contentAnalysis">
                            <!-- Analisis konten akan ditampilkan di sini -->
                        </div>
                    </div>
                </div>
                
                <div class="recommendations" id="recommendations">
                    <h3 class="recommendations-title">
                        <i class="fas fa-lightbulb"></i>
                        Rekomendasi Tindakan
                    </h3>
                    <div id="recommendationList">
                        <!-- Rekomendasi akan ditampilkan di sini -->
                    </div>
                </div>
            </div>
        </section>

        <section class="tips-container" id="tips">
            <h2 class="section-title">
                <i class="fas fa-shield-alt"></i>
                Tips Mengenali Email Phishing
            </h2>
            
            <div class="tips-list">
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Periksa Pengirim</h4>
                        <p>Selalu periksa alamat email pengirim dengan cermat. Phisher sering menggunakan alamat yang mirip dengan alamat resmi tetapi dengan sedikit perubahan, seperti mengganti satu karakter atau menggunakan domain yang mirip.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Waspadai Urgensi dan Ancaman</h4>
                        <p>Email phishing sering menciptakan rasa urgensi atau ketakutan, seperti "Akun Anda akan diblokir dalam 24 jam" atau "Aktivitas mencurigakan terdeteksi". Ini adalah taktik untuk membuat Anda bertindak cepat tanpa berpikir.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-link"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Hover Sebelum Klik</h4>
                        <p>Arahkan kursor ke tautan dalam email tanpa mengkliknya untuk melihat URL sebenarnya. Jika URL tidak sesuai dengan yang ditampilkan dalam teks, itu adalah indikasi phishing.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-spell-check"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Perhatikan Kesalahan Gramatikal</h4>
                        <p>Email resmi dari perusahaan besar biasanya telah melalui proses penulisan dan editing yang ketat. Kesalahan ejaan, tata bahasa, atau format yang aneh bisa menjadi tanda email phishing.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Waspadai Penawaran yang Terlalu Bagus</h4>
                        <p>Jika sebuah email menawarkan hadiah, diskon, atau penawaran yang terdengar terlalu bagus untuk menjadi kenyataan, kemungkinan besar itu adalah phishing. Tidak ada yang memberikan sesuatu secara gratis tanpa alasan.</p>
                    </div>
                </div>
                
                <div class="tip-item">
                    <div class="tip-icon">
                        <i class="fas fa-file-download"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Hati-hati dengan Lampiran</h4>
                        <p>Jangan membuka lampiran dari pengirim yang tidak dikenal atau lampiran yang tidak Anda harapkan. File seperti .exe, .scr, atau .zip yang berisi file eksekusi dapat berisi malware.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-links">
            <a href="#privacy">Kebijakan Privasi</a>
            <a href="#terms">Syarat & Ketentuan</a>
            <a href="#help">Bantuan</a>
            <a href="#api">API</a>
        </div>
        <p>&copy; 2023 PhishMail. Hak Cipta Dilindungi.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Menu toggle functionality
            const menuToggle = document.getElementById('menuToggle');
            const navMenu = document.getElementById('navMenu');
            
            menuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                document.body.classList.toggle('menu-open');
                
                // Animate hamburger menu
                const spans = menuToggle.querySelectorAll('span');
                if (navMenu.classList.contains('active')) {
                    spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
                    spans[1].style.opacity = '0';
                    spans[2].style.transform = 'rotate(-45deg) translate(7px, -6px)';
                } else {
                    spans[0].style.transform = 'rotate(0) translate(0, 0)';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'rotate(0) translate(0, 0)';
                }
            });
            
            // Close menu when clicking on a link
            const navLinks = navMenu.querySelectorAll('a');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    navMenu.classList.remove('active');
                    document.body.classList.remove('menu-open');
                    const spans = menuToggle.querySelectorAll('span');
                    spans[0].style.transform = 'rotate(0) translate(0, 0)';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'rotate(0) translate(0, 0)';
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!navMenu.contains(event.target) && !menuToggle.contains(event.target) && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    document.body.classList.remove('menu-open');
                    const spans = menuToggle.querySelectorAll('span');
                    spans[0].style.transform = 'rotate(0) translate(0, 0)';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'rotate(0) translate(0, 0)';
                }
            });

            // Email analyzer functionality
            const methodTabs = document.querySelectorAll('.method-tab');
            const textPanel = document.getElementById('textPanel');
            const filePanel = document.getElementById('filePanel');
            const emailText = document.getElementById('emailText');
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileMeta = document.getElementById('fileMeta');
            const removeFileBtn = document.getElementById('removeFileBtn');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const clearBtn = document.getElementById('clearBtn');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressPercent = document.getElementById('progressPercent');
            const analysisStatus = document.getElementById('analysisStatus');
            const analysisResult = document.getElementById('analysisResult');
            const resultStatus = document.getElementById('resultStatus');
            const headerAnalysis = document.getElementById('headerAnalysis');
            const linkAnalysis = document.getElementById('linkAnalysis');
            const contentAnalysis = document.getElementById('contentAnalysis');
            const recommendationList = document.getElementById('recommendationList');
            
            let currentMethod = 'text';
            let selectedFile = null;
            let analysisInterval = null;
            let progress = 0;
            
            // Method tab switching
            methodTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    methodTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentMethod = this.dataset.method;
                    
                    if (currentMethod === 'text') {
                        textPanel.classList.add('active');
                        filePanel.classList.remove('active');
                    } else {
                        textPanel.classList.remove('active');
                        filePanel.classList.add('active');
                    }
                });
            });
            
            // File upload via drag and drop
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                this.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            // File input change
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function() {
                if (this.files.length) {
                    handleFile(this.files[0]);
                }
            });
            
            // Handle selected file
            function handleFile(file) {
                selectedFile = file;
                
                // Show file info
                fileInfo.style.display = 'block';
                uploadArea.style.display = 'none';
                
                fileName.textContent = file.name;
                
                // Format file size
                const fileSize = formatFileSize(file.size);
                fileMeta.textContent = `${fileSize}`;
                
                // Reset analysis result
                analysisResult.style.display = 'none';
                progressContainer.style.display = 'none';
            }
            
            // Format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Remove file
            removeFileBtn.addEventListener('click', function() {
                selectedFile = null;
                fileInput.value = '';
                fileInfo.style.display = 'none';
                uploadArea.style.display = 'block';
                analysisResult.style.display = 'none';
                progressContainer.style.display = 'none';
            });
            
            // Clear button
            clearBtn.addEventListener('click', function() {
                emailText.value = '';
                selectedFile = null;
                fileInput.value = '';
                fileInfo.style.display = 'none';
                uploadArea.style.display = 'block';
                analysisResult.style.display = 'none';
                progressContainer.style.display = 'none';
            });
            
            // Analyze button
            analyzeBtn.addEventListener('click', function() {
                let emailContent = '';
                
                if (currentMethod === 'text') {
                    emailContent = emailText.value.trim();
                    if (!emailContent) {
                        alert('Silakan masukkan konten email untuk dianalisis');
                        return;
                    }
                } else {
                    if (!selectedFile) {
                        alert('Silakan pilih file .eml untuk dianalisis');
                        return;
                    }
                    
                    // In a real implementation, we would read the file content
                    // For demo purposes, we'll use a sample email content
                    emailContent = `From: security@paypal.com
To: user@example.com
Subject: Account Verification Required

Dear valued customer,

We have detected unusual activity on your PayPal account. To protect your account, we need to verify your identity immediately.

Please click the link below to verify your account:
http://paypal-security.verification-center.com/verify-account

If you don't verify your account within 24 hours, your account will be permanently suspended.

Thank you for your cooperation.

PayPal Security Team`;
                }
                
                // Reset progress
                progress = 0;
                progressFill.style.width = '0%';
                progressPercent.textContent = '0%';
                
                // Show progress and analysis status
                progressContainer.style.display = 'block';
                analysisStatus.style.display = 'block';
                analysisResult.style.display = 'none';
                
                // Disable analyze button
                analyzeBtn.disabled = true;
                
                // Start simulation
                analysisInterval = setInterval(updateAnalysisProgress, 100);
                
                // Store email content for analysis
                window.emailContentForAnalysis = emailContent;
            });
            
            // Update analysis progress
            function updateAnalysisProgress() {
                // Update progress
                progress += Math.random() * 5;
                if (progress > 100) progress = 100;
                
                progressFill.style.width = `${progress}%`;
                progressPercent.textContent = `${Math.floor(progress)}%`;
                
                // Check if analysis is complete
                if (progress >= 100) {
                    clearInterval(analysisInterval);
                    
                    // Hide analysis status
                    analysisStatus.style.display = 'none';
                    
                    // Enable analyze button
                    analyzeBtn.disabled = false;
                    
                    // Show result
                    displayAnalysisResult(window.emailContentForAnalysis);
                }
            }
            
            // Display analysis result
            function displayAnalysisResult(emailContent) {
                // Analyze email content
                const analysis = analyzeEmail(emailContent);
                
                // Set result status
                resultStatus.innerHTML = `
                    <i class="${analysis.status.icon}"></i>
                    <span class="${analysis.status.class}">${analysis.status.text}</span>
                `;
                
                // Display header analysis
                headerAnalysis.innerHTML = '';
                analysis.headers.forEach(header => {
                    const headerItem = document.createElement('div');
                    headerItem.className = 'analysis-item';
                    
                    let iconClass;
                    if (header.status === 'safe') {
                        iconClass = 'fas fa-check-circle safe';
                    } else if (header.status === 'danger') {
                        iconClass = 'fas fa-times-circle danger';
                    } else {
                        iconClass = 'fas fa-exclamation-circle warning';
                    }
                    
                    headerItem.innerHTML = `
                        <div class="item-icon ${header.status}">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="item-content">
                            <div class="item-label">${header.label}</div>
                            <div class="item-value">${header.value}</div>
                        </div>
                    `;
                    
                    headerAnalysis.appendChild(headerItem);
                });
                
                // Display link analysis
                linkAnalysis.innerHTML = '';
                analysis.links.forEach(link => {
                    const linkItem = document.createElement('div');
                    linkItem.className = 'analysis-item';
                    
                    let iconClass;
                    if (link.status === 'safe') {
                        iconClass = 'fas fa-check-circle safe';
                    } else if (link.status === 'danger') {
                        iconClass = 'fas fa-times-circle danger';
                    } else {
                        iconClass = 'fas fa-exclamation-circle warning';
                    }
                    
                    linkItem.innerHTML = `
                        <div class="item-icon ${link.status}">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="item-content">
                            <div class="item-label">${link.label}</div>
                            <div class="item-value">${link.value}</div>
                        </div>
                    `;
                    
                    linkAnalysis.appendChild(linkItem);
                });
                
                // Display content analysis
                contentAnalysis.innerHTML = '';
                analysis.content.forEach(content => {
                    const contentItem = document.createElement('div');
                    contentItem.className = 'analysis-item';
                    
                    let iconClass;
                    if (content.status === 'safe') {
                        iconClass = 'fas fa-check-circle safe';
                    } else if (content.status === 'danger') {
                        iconClass = 'fas fa-times-circle danger';
                    } else {
                        iconClass = 'fas fa-exclamation-circle warning';
                    }
                    
                    contentItem.innerHTML = `
                        <div class="item-icon ${content.status}">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="item-content">
                            <div class="item-label">${content.label}</div>
                            <div class="item-value">${content.value}</div>
                        </div>
                    `;
                    
                    contentAnalysis.appendChild(contentItem);
                });
                
                // Display recommendations
                recommendationList.innerHTML = '';
                analysis.recommendations.forEach(recommendation => {
                    const recommendationItem = document.createElement('div');
                    recommendationItem.className = 'recommendation-item';
                    
                    recommendationItem.innerHTML = `
                        <div class="recommendation-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="recommendation-text">${recommendation}</div>
                    `;
                    
                    recommendationList.appendChild(recommendationItem);
                });
                
                // Show result
                analysisResult.style.display = 'block';
            }
            
            // Analyze email content
            function analyzeEmail(content) {
                const result = {
                    status: {
                        text: 'Aman - Tidak Ada Indikasi Phishing',
                        class: 'safe',
                        icon: 'fas fa-check-circle'
                    },
                    headers: [],
                    links: [],
                    content: [],
                    recommendations: []
                };
                
                // Extract headers (simplified for demo)
                const fromMatch = content.match(/From:\s*(.+)/i);
                const toMatch = content.match(/To:\s*(.+)/i);
                const subjectMatch = content.match(/Subject:\s*(.+)/i);
                
                if (fromMatch) {
                    const from = fromMatch[1].trim();
                    const isSuspiciousFrom = isSuspiciousEmailAddress(from);
                    
                    result.headers.push({
                        label: 'Pengirim',
                        value: from,
                        status: isSuspiciousFrom ? 'danger' : 'safe'
                    });
                    
                    if (isSuspiciousFrom) {
                        result.status = {
                            text: 'Berbahaya - Indikasi Phishing Terdeteksi',
                            class: 'danger',
                            icon: 'fas fa-exclamation-triangle'
                        };
                    }
                }
                
                if (toMatch) {
                    result.headers.push({
                        label: 'Penerima',
                        value: toMatch[1].trim(),
                        status: 'safe'
                    });
                }
                
                if (subjectMatch) {
                    const subject = subjectMatch[1].trim();
                    const isSuspiciousSubject = isSuspiciousSubjectLine(subject);
                    
                    result.headers.push({
                        label: 'Subjek',
                        value: subject,
                        status: isSuspiciousSubject ? 'warning' : 'safe'
                    });
                    
                    if (isSuspiciousSubject && result.status.class === 'safe') {
                        result.status = {
                            text: 'Mencurigakan - Perlu Verifikasi Lebih Lanjut',
                            class: 'warning',
                            icon: 'fas fa-exclamation-circle'
                        };
                    }
                }
                
                // Extract and analyze links
                const urlRegex = /https?:\/\/[^\s]+/g;
                const urls = content.match(urlRegex) || [];
                
                if (urls.length > 0) {
                    urls.forEach(url => {
                        const isSuspiciousUrl = isSuspiciousLink(url);
                        
                        result.links.push({
                            label: 'Tautan',
                            value: url,
                            status: isSuspiciousUrl ? 'danger' : 'safe'
                        });
                        
                        if (isSuspiciousUrl && result.status.class === 'safe') {
                            result.status = {
                                text: 'Mencurigakan - Tautan Mencurigakan Terdeteksi',
                                class: 'warning',
                                icon: 'fas fa-exclamation-circle'
                            };
                        }
                    });
                } else {
                    result.links.push({
                        label: 'Tautan',
                        value: 'Tidak ada tautan yang terdeteksi',
                        status: 'safe'
                    });
                }
                
                // Analyze content for suspicious keywords
                const suspiciousKeywords = [
                    'verify your account', 'suspend', 'urgent', 'immediately', 
                    'click here', 'update payment', 'confirm identity', 'security breach',
                    'limited time', 'act now', 'expired', 'locked account'
                ];
                
                let suspiciousCount = 0;
                const lowerContent = content.toLowerCase();
                
                suspiciousKeywords.forEach(keyword => {
                    if (lowerContent.includes(keyword)) {
                        suspiciousCount++;
                        
                        result.content.push({
                            label: 'Kata Kunci Mencurigakan',
                            value: `"${keyword}" terdeteksi dalam email`,
                            status: 'warning'
                        });
                    }
                });
                
                if (suspiciousCount === 0) {
                    result.content.push({
                        label: 'Kata Kunci Mencurigakan',
                        value: 'Tidak ada kata kunci mencurigakan yang terdeteksi',
                        status: 'safe'
                    });
                } else if (result.status.class === 'safe') {
                    result.status = {
                        text: 'Mencurigakan - Konten Mencurigakan Terdeteksi',
                        class: 'warning',
                        icon: 'fas fa-exclamation-circle'
                    };
                }
                
                // Generate recommendations based on analysis
                if (result.status.class === 'danger') {
                    result.recommendations.push('Hapus email ini segera dan jangan klik tautan apa pun di dalamnya.');
                    result.recommendations.push('Laporkan email sebagai phishing ke penyedia layanan email Anda.');
                    result.recommendations.push('Jika Anda memiliki akun dengan layanan yang disebutkan dalam email, kunjungi situs resminya secara langsung (bukan melalui tautan dalam email) untuk memeriksa status akun Anda.');
                } else if (result.status.class === 'warning') {
                    result.recommendations.push('Berhati-hatilah dengan email ini. Verifikasi pengirim sebelum mengambil tindakan apa pun.');
                    result.recommendations.push('Jangan mengklik tautan dalam email atau mengunduh lampiran.');
                    result.recommendations.push('Jika Anda merasa perlu, hubungi perusahaan yang mengirim email melalui saluran resmi untuk memverifikasi keaslian email.');
                } else {
                    result.recommendations.push('Email tampaknya aman, tetapi selalu waspada terhadap email yang meminta informasi pribadi atau tindakan segera.');
                    result.recommendations.push('Jika Anda tidak mengharapkan email ini, verifikasi dengan pengirim sebelum mengambil tindakan.');
                    result.recommendations.push('Pertahankan perangkat lunak keamanan Anda tetap terkini untuk perlindungan maksimal.');
                }
                
                return result;
            }
            
            // Check if email address is suspicious
            function isSuspiciousEmailAddress(email) {
                const suspiciousDomains = [
                    'paypal-security.com', 'amazon-verify.com', 'microsoft-support.com',
                    'apple-security.com', 'google-secure.com', 'facebook-verify.com'
                ];
                
                const lowerEmail = email.toLowerCase();
                
                // Check for suspicious domains
                for (const domain of suspiciousDomains) {
                    if (lowerEmail.includes(domain)) {
                        return true;
                    }
                }
                
                // Check for mismatched display name and email domain
                const nameMatch = email.match(/(.+?)\s*<(.+)>/);
                if (nameMatch) {
                    const displayName = nameMatch[1].toLowerCase();
                    const emailAddress = nameMatch[2].toLowerCase();
                    
                    // Check if display name contains a brand name but email domain doesn't match
                    const brands = ['paypal', 'amazon', 'microsoft', 'apple', 'google', 'facebook'];
                    for (const brand of brands) {
                        if (displayName.includes(brand) && !emailAddress.includes(brand)) {
                            return true;
                        }
                    }
                }
                
                return false;
            }
            
            // Check if subject line is suspicious
            function isSuspiciousSubjectLine(subject) {
                const suspiciousPatterns = [
                    /urgent/i, /immediate/i, /action required/i, /account suspended/i,
                    /verify your account/i, /security alert/i, /limited time/i
                ];
                
                const lowerSubject = subject.toLowerCase();
                
                for (const pattern of suspiciousPatterns) {
                    if (pattern.test(lowerSubject)) {
                        return true;
                    }
                }
                
                return false;
            }
            
            // Check if link is suspicious
            function isSuspiciousLink(url) {
                const suspiciousPatterns = [
                    /bit\.ly/, /tinyurl\.com/, /goo\.gl/,
                    /paypal-security/, /amazon-verify/, /microsoft-support/,
                    /apple-security/, /google-secure/, /facebook-verify/
                ];
                
                const lowerUrl = url.toLowerCase();
                
                for (const pattern of suspiciousPatterns) {
                    if (pattern.test(lowerUrl)) {
                        return true;
                    }
                }
                
                // Check for URL shorteners
                const urlShorteners = ['bit.ly', 'tinyurl.com', 'goo.gl', 't.co', 'ow.ly'];
                for (const shortener of urlShorteners) {
                    if (lowerUrl.includes(shortener)) {
                        return true;
                    }
                }
                
                return false;
            }
        });
    </script>
</body>
</html>
